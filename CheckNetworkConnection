Call the following before using any utility that checks for the network
checkNetworkConnection();

private void checkNetworkConnection() {
  ConnectivityManager connectivityManager = (ConnectivityManager)
          getSystemService(Context.CONNECTIVITY_SERVICE);
  NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();
  if (networkInfo != null && networkInfo.isConnected()) {
      //Toast.makeText(this, "Network Connected", Toast.LENGTH_SHORT).show();
  } else {
      // display an error
      text.setText("No network connection");
  }

}
